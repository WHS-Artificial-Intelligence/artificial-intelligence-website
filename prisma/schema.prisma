/* Written by: Sean Fang & Christopher Gholmieh */
/* Client: */
generator client {
    /* Provider: */
    provider = "prisma-client-js"
}

/* Source: */
datasource db {
    /* Provider: */
    provider = "postgresql"
}


/* User: */
model User {
    /* Identifier: */
    identifier          String @id @default(cuid())

    /* Identifier: */
    clerk_identifier    String @unique

    /* Email: */
    email               String? @unique

    /* Name: */
    first_name          String
    last_name           String

    /* Role: */
    role                Role @default(STUDENT)

    /* Posts: */
    posts               Post[]

    /* Comments: */
    comments            Comment[]

    /* Timestamp: */
    creation_timestamp  DateTime @default(now())
}

/* Post: */
model Post {
    /* Identifier: */
    identifier          String @id @default(cuid())

    /* Title: */
    title               String

    /* Author: */
    author              User @relation(fields: [author_identifier], references: [identifier])

    /* Identifier: */
    author_identifier   String

    /* Content: */
    content             String

    /* Approved: */
    approved            Boolean @default(false)

    /* Deletion: */
    deleted             Boolean @default(false)

    /* Comments: */
    comments            Comment[]

    /* Timestamp: */
    creation_timestamp  DateTime @default(now())

    /* Timestamp: */
    deletion_timestamp  DateTime?
}

/* Comment: */
model Comment {
    /* Identifier: */
    identifier          String @id @default(cuid())

    /* Author: */
    author              User @relation(fields: [author_identifier], references: [identifier])

    /* Identifier: */
    author_identifier   String

    /* Post: */
    post                Post @relation(fields: [post_identifier], references: [identifier])

    /* Identifier: */
    post_identifier     String

    /* Content: */
    content             String

    /* Approved: */
    approved            Boolean

    /* Deletion: */
    deleted             Boolean @default(false)

    /* Timestamp: */
    creation_timestamp  DateTime @default(now())

    /* Timestamp: */
    deletion_timestamp  DateTime?
}

/* Role: */
enum Role {
    /* Student: */
    STUDENT

    /* Teacher: */
    TEACHER
}